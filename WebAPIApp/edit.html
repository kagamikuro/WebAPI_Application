<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>
        Edit a book
    </title>

    <link href="bootstrap.min.css" rel="stylesheet">
    <script src="jquery-3.5.1.min.js"></script>

    <script type="text/javascript">

        function edit() {
            console.log("edit function called")
            var _data = {"Id": $("#id").val(), "Name": $("#name").val(), "Category": $("#type").val(), "Rate": $("#rate").val(), "Price": $("#price").val() };
            var name = $("#name").val();

            $.ajax({
                url: "api/Books/",
                type: "PUT",
                data: _data,
                success: function (data) {
                    alert("edit book [" + name + "] successfully");
                    window.close();
                },
                error: function (e) {
                    alert("no this book!");
                    alert(e.responseText);
                }
            });
        }
    </script>

</head>
<body>
    <h2 class="font-weight-normal">Edit books</h2>

    <div style="padding: 10px 10px 10px;" id="editBook">
        <form class="bs-example bs-example-form" role="form">

            <div class="input-group">
                <span class="input-group-addon">ID:</span>
                <input type="text" class="form-control" id="id">
            </div>
            <br>
            <div class="input-group">
                <span class="input-group-addon">book name:</span>
                <input type="text" class="form-control" id="name">
            </div>
            <br>
            <div class="input-group">
                <span class="input-group-addon">book type:</span>
                <input type="text" class="form-control" id="type">
            </div>
            <br>
            <div class="input-group">
                <span class="input-group-addon">rate:</span>
                <input type="text" class="form-control" id="rate">
            </div>
            <br>
            <div class="input-group">
                <span class="input-group-addon">price:</span>
                <input type="text" class="form-control" id="price">
            </div>
            <br>
            <div class="input-group">
                <input class="btn btn-primary" type="button" id="btnEdit" value="Edit" onclick="edit()" />
            </div>
        </form>
    </div>

    <script type="text/javascript">
        var bookId = decodeURI(window.location.href).split('=')[1];
        //alert(bookName);
        $("#id").val(bookId);
        $("#id").attr("disabled", "disabled");

    </script>

</body>
</html>